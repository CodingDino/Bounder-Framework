// ************************************************************************ 
// File Name:   ScreenFlash.cs 
// Purpose:    	Apply screen flash to camera from events
// Project:		Framework
// Author:      Sarah Herzog  
// Copyright: 	2018 Bounder Games
// ************************************************************************ 


// ************************************************************************ 
#region Imports
// ************************************************************************
using System.Collections;
using System.Collections.Generic;
using UnityEngine;
#endregion
// ************************************************************************


// ************************************************************************ 
#region Class: ScreenFlashEvent
// ************************************************************************
public class ScreenFlashEvent : GameEvent 
{
	// ********************************************************************
	#region Public Data Members 
	// ********************************************************************
	public float duration = 0.5f;
	#endregion
	// ********************************************************************


	// ********************************************************************
	#region Constructors 
	// ********************************************************************
	public ScreenFlashEvent (float _duration = 0.5f) 
	{
		duration = +duration;
	}
	// ********************************************************************
	#endregion
	// ********************************************************************

}
#endregion
// ************************************************************************


// ************************************************************************ 
#region Class: ScreenFlash
// ************************************************************************
[RequireComponent(typeof(FadeSprite))]
public class ScreenFlash : MonoBehaviour 
{
	// ********************************************************************
	#region MonoBehaviour Methods 
	// ********************************************************************
	void OnEnable () 
	{
		Events.AddListener<ScreenFlashEvent>(OnScreenFlashEvent);
	}
	// ********************************************************************
	void OnDisable () 
	{
		Events.RemoveListener<ScreenFlashEvent>(OnScreenFlashEvent);
	}
	// ********************************************************************
	#endregion
	// ********************************************************************


	// ********************************************************************
	#region Public Methods 
	// ********************************************************************
	public void ApplyScreenFlash(float _duration)
	{
		FadeSprite fader = GetComponent<FadeSprite>();
		fader.SetVisible(true);
		fader.duration = _duration;
		fader.FadeOut();
	}
	// ********************************************************************
	#endregion
	// ********************************************************************


	// ********************************************************************
	#region Private Methods 
	// ********************************************************************
	private void OnScreenFlashEvent (ScreenFlashEvent _event) 
	{
		ApplyScreenFlash(_event.duration);
	}
	// ********************************************************************
	#endregion
	// ********************************************************************
}
#endregion
// ************************************************************************